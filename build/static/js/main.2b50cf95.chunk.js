(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(15),r=t.n(s),c=t(4),m=t(30),i=(t(72),t(104),t(6)),o=t(7),d=t(9),u=t(8),h=t(10),E=function(e){function a(){return Object(i.a)(this,a),Object(d.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("nav",{className:"navbar navbar-default navbar-fixed-top"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"navbar-header"},l.a.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#navbar","aria-expanded":"false","aria-controls":"navbar"},l.a.createElement("span",{className:"sr-only"},"Toggle navigation"),l.a.createElement("span",{className:"icon-bar"}),l.a.createElement("span",{className:"icon-bar"}),l.a.createElement("span",{className:"icon-bar"})),l.a.createElement(c.b,{className:"navbar-brand",to:"#"},"Shule Yetu")),l.a.createElement("div",{id:"navbar",className:"collapse navbar-collapse"},l.a.createElement("ul",{className:"nav navbar-nav"},l.a.createElement("li",null,l.a.createElement(c.b,{activeClassName:"active",exact:!0,to:"/"},"Dashboard")),l.a.createElement("li",null,l.a.createElement(c.b,{activeClassName:"active",to:"/students"},"Students")),l.a.createElement("li",null,l.a.createElement(c.b,{activeClassName:"active",to:"/teachers"},"Teachers")),l.a.createElement("li",null,l.a.createElement(c.b,{activeClassName:"active",to:"/classes"},"Classes"))))))}}]),a}(n.Component),p=t(53);t(163);p.initializeApp({apiKey:"AIzaSyCelZYqfc3f-Kwaghi4rof6W_qnrlG7S88",authDomain:"school-management-system-f66c3.firebaseapp.com",databaseURL:"https://school-management-system-f66c3.firebaseio.com",projectId:"school-management-system-f66c3",storageBucket:"school-management-system-f66c3.appspot.com",messagingSenderId:"867679890969"}),p.firestore().settings({});var b=p,f=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).fetchStudents=function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.firstname,l=a.lastname,s=a.gender,r=a.parent_name,c=a.parent_phone_number,m=a.residential_area;t.push({key:e.id,firstname:n,lastname:l,gender:s,parent_name:r,parent_phone_number:c,residential_area:m})}),e.setState({students:t})},e.fetchTeachers=function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.firstname,l=a.lastname,s=a.phone_number,r=a.id_number,c=a.dateofbirth,m=a.residential_area;t.push({key:e.id,firstname:n,lastname:l,phone_number:s,id_number:r,dateofbirth:c,residential_area:m})}),e.setState({teachers:t})},e.fetchClasses=function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.name,l=a.students_num,s=a.teachers_num,r=a.capacity;t.push({key:e.id,name:n,students_num:l,teachers_num:s,capacity:r})}),e.setState({classes:t})},e.getCounters=function(){b.firestore().collection("students").get().then(function(a){e.setState({students_num:a.size})}),b.firestore().collection("teachers").get().then(function(a){e.setState({teachers_num:a.size})}),b.firestore().collection("classes").get().then(function(a){e.setState({classes_num:a.size})})},e.state={students_num:0,teachers_num:0,classes_num:0,students:[],teachers:[],classes:[]},e.students_unsubscribe=null,e.teachers_unsubscribe=null,e.classes_unsubscribe=null,e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.students_unsubscribe=b.firestore().collection("students").limit(10).onSnapshot(this.fetchStudents),this.teachers_unsubscribe=b.firestore().collection("teachers").limit(10).onSnapshot(this.fetchTeachers),this.classes_unsubscribe=b.firestore().collection("classes").limit(10).onSnapshot(this.fetchClasses),this.getCounters()}},{key:"render",value:function(){var e="",a=1;e=this.state.students.length>0?this.state.students.map(function(e){return l.a.createElement("tr",{key:e.key},l.a.createElement("td",null,a++),l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.gender),l.a.createElement("td",null,e.parent_name),l.a.createElement("td",null,e.parent_phone_number),l.a.createElement("td",null,e.residential_area),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/student/".concat(e.key)},l.a.createElement("i",{className:"fa fa-eye"}))))}):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"8",className:"text-center"},"No students available"));var t="",n=1;t=this.state.teachers.length>0?this.state.teachers.map(function(e){return l.a.createElement("tr",{key:e.key},l.a.createElement("td",null,n++),l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.phone_number),l.a.createElement("td",null,e.id_number),l.a.createElement("td",null,e.dateofbirth),l.a.createElement("td",null,e.residential_area),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/teacher/".concat(e.key)},l.a.createElement("i",{className:"fa fa-eye"}))))}):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"8",className:"text-center"},"No teachers available"));var s="",r=1;return s=this.state.classes.length>0?this.state.classes.map(function(e){return l.a.createElement("tr",{key:e.key},l.a.createElement("td",null,r++),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/class/".concat(e.key)},e.name)),l.a.createElement("td",null,e.students_num),l.a.createElement("td",null,e.teachers_num),l.a.createElement("td",null,e.capacity),l.a.createElement("td",null,e.students_num==e.capacity?l.a.createElement("label",{className:"badge badge-warning"},"Full"):l.a.createElement("label",{className:"badge badge-success"},"Available")))}):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"6",className:"text-center"},"No classes available")),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4 col-md-4"},l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body text-center"},l.a.createElement("i",{className:"fa fa-graduation-cap fa-2x"}),l.a.createElement("h3",null,this.state.students_num),l.a.createElement("h4",null,"Students")))),l.a.createElement("div",{className:"col-lg-4 col-md-4"},l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body text-center"},l.a.createElement("i",{className:"fa fa-users fa-2x"}),l.a.createElement("h3",null,this.state.teachers_num),l.a.createElement("h4",null,"Teachers")))),l.a.createElement("div",{className:"col-lg-4 col-md-4"},l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body text-center"},l.a.createElement("i",{className:"fa fa-building fa-2x"}),l.a.createElement("h3",null,this.state.classes_num),l.a.createElement("h4",null,"Classes"))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("h3",null,"Latest Students"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"First Name"),l.a.createElement("th",null,"Last Name"),l.a.createElement("th",null,"Sex"),l.a.createElement("th",null,"Parent Name"),l.a.createElement("th",null,"Parent Phone Number"),l.a.createElement("th",null,"Residence"))),l.a.createElement("tbody",null,e)))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("h3",null,"Latest Teachers"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"First Name"),l.a.createElement("th",null,"Last Name"),l.a.createElement("th",null,"Phone"),l.a.createElement("th",null,"ID Number"),l.a.createElement("th",null,"Date of Birth"),l.a.createElement("th",null,"Residence"))),l.a.createElement("tbody",null,t)))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("h3",null,"Latest Classes"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Students"),l.a.createElement("th",null,"Teachers"),l.a.createElement("th",null,"Capacity"),l.a.createElement("th",null,"Status"))),l.a.createElement("tbody",null,s)))))))}}]),a}(n.Component),v=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onStudentsUpdate=function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.firstname,l=a.lastname,s=a.gender,r=a.residential_area,c=a.parent_name,m=a.parent_phone_number;t.push({key:e.id,firstname:n,lastname:l,gender:s,residential_area:r,parent_name:c,parent_phone_number:m})}),e.setState({students:t})},e.state={students:[]},e.unsubsribe=null,e.ref=b.firestore().collection("students"),e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.unsubsribe=this.ref.onSnapshot(this.onStudentsUpdate)}},{key:"componentWillUnmount",value:function(){this.unsubsribe()}},{key:"render",value:function(){var e=1,a="";return a=this.state.students.length>0?this.state.students.map(function(a){return l.a.createElement("tr",{key:a.key},l.a.createElement("td",null,e++),l.a.createElement("td",null,a.firstname),l.a.createElement("td",null,a.lastname),l.a.createElement("td",null,a.gender),l.a.createElement("td",null,a.parent_name),l.a.createElement("td",null,a.parent_phone_number),l.a.createElement("td",null,a.residential_area),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/student/".concat(a.key)},l.a.createElement("i",{className:"fa fa-eye"}))))}):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"8",className:"text-center"},"No students available")),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"clearfix mb-10"},l.a.createElement("div",{className:"pull-left"},l.a.createElement("h3",null,"Students")),l.a.createElement("div",{className:"pull-right"},l.a.createElement(c.b,{to:"/students/add",className:"btn btn-primary",style:{marginTop:20}},l.a.createElement("i",{className:"fa fa-plus"})," Add New Student"))),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"First Name"),l.a.createElement("th",null,"Last Name"),l.a.createElement("th",null,"Sex"),l.a.createElement("th",null,"Parent Name"),l.a.createElement("th",null,"Parent Phone Number"),l.a.createElement("th",null,"Residence"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a)))))))}}]),a}(n.Component),N=t(52),g=t(50),_=t.n(g),y=(t(88),function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onChange=function(a){var t=e.state,n="checkbox"===a.target.type?a.target.checked:a.target.value;"parent_phone_number"==a.target.name&&(e.re.test(n)?e.setState({error:""}):e.setState({error:"phone_number"})),t[a.target.name]=n,e.setState(t)},e.onSubmit=function(a){a.preventDefault(),e.setState({loading:!0});var t=e.state,n=t.firstname,l=t.lastname,s=t.gender,r=t.formatted_date,c=t.address,m=t.residential_area,i=t.parent_name,o=t.parent_phone_number,d=t.link_class,u=t.student_class;if(e.re.test(o)){var h={firstname:n,lastname:l,gender:s,dateofbirth:r,address:c,residential_area:m,parent_name:i,parent_phone_number:o};d?e.addStudentWithClass(u,h).then(function(){e.setState({firstname:"",lastname:"",gender:"",formatted_date:"",address:"",residential_area:"",parent_name:"",parent_phone_number:"",link_class:!1,loading:!1,classes:[]},function(){e.props.history.push("/students")})}):e.addStudentWithoutClass(h).then(function(){e.setState({firstname:"",lastname:"",gender:"",formatted_date:"",address:"",residential_area:"",parent_name:"",parent_phone_number:"",link_class:!1,loading:!1,classes:[]},function(){e.props.history.push("/students")})})}else e.setState({error:"phone_number",loading:!1})},e.fetchClasses=function(){var a=b.firestore().collection("classes"),t=[];e.unsubsribe=a.onSnapshot(function(a){a.forEach(function(e){var a=e.data(),n=a.name,l=a.capacity;a.students_num<l&&t.push({key:e.id,name:n})}),e.setState({classes:t}),e.unsubsribe()})},e.addStudentWithClass=function(a,t){var n=b.firestore().collection("classes").doc(a);return n.get().then(function(a){var l=a.data().name;e.ref.add({firstname:t.firstname,lastname:t.lastname,gender:t.gender,dateofbirth:t.dateofbirth,address:t.address,residential_area:t.residential_area,parent_name:t.parent_name,parent_phone_number:t.parent_phone_number,classname:{id:a.id,name:l}}).then(function(){n.collection("students").add({firstname:t.firstname,lastname:t.lastname,gender:t.gender,dateofbirth:t.dateofbirth,address:t.address,residential_area:t.residential_area,parent_name:t.parent_name,parent_phone_number:t.parent_phone_number}).then(function(){return n.update({students_num:b.firestore.FieldValue.increment(1)})})})})},e.addStudentWithoutClass=function(a){return e.ref.add({firstname:a.firstname,lastname:a.lastname,gender:a.gender,dateofbirth:a.dateofbirth,address:a.address,residential_area:a.residential_area,parent_name:a.parent_name,parent_phone_number:a.parent_phone_number})},e.handleChange=function(a){var t=_()(a);e.setState({formatted_date:t.format("DD/MM/YYYY"),dateofbirth:a})},e.ref=b.firestore().collection("students"),e.unsubsribe=null,e.re=new RegExp("^[0]{1}[7]{1}[0-9]{8}$"),e.state={firstname:"",lastname:"",gender:"male",dateofbirth:new Date,address:"",residential_area:"",parent_name:"",parent_phone_number:"",link_class:!0,loading:!1,student_class:"",formatted_date:"",classes:[],error:""},e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentWillUnmount",value:function(){this.unsubsribe&&this.unsubsribe()}},{key:"render",value:function(){var e,a,t=this.state,n=t.firstname,s=t.lastname,r=t.gender,m=(t.dateofbirth,t.address),i=t.residential_area,o=t.parent_name,d=t.parent_phone_number,u=t.link_class,h=t.student_class,E="form-control";return e=!0===t.loading?l.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:"disabled"}," ",l.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Adding"):l.a.createElement("button",{type:"submit",className:"btn btn-success"},"Add Student"),!0===u&&(this.fetchClasses(),a=l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Select a class"),l.a.createElement("select",{className:"form-control",name:"student_class",value:h,onChange:this.onChange},this.state.classes.map(function(e){return l.a.createElement("option",{key:e.key,value:e.key},e.name)})))),"phone_number"==this.state.error&&(E="form-control error"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(c.b,{to:"/students",className:"btn btn-default"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Students"),l.a.createElement("h3",{className:"text-center"},"Add a Student"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("form",{className:"form",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"First Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",value:n,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",value:s,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Gender"),l.a.createElement("select",{className:"form-control",name:"gender",value:r,onChange:this.onChange},l.a.createElement("option",{value:"male"},"Male"),l.a.createElement("option",{value:"female"},"Female"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Date of Birth"),l.a.createElement(N.a,{selected:this.state.dateofbirth,onChange:this.handleChange,className:"form-control",placeholderText:"Select a date",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Address"),l.a.createElement("input",{type:"text",className:"form-control",name:"address",value:m,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Residential Area"),l.a.createElement("input",{type:"text",className:"form-control",name:"residential_area",value:i,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Parent's Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"parent_name",value:o,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Parent's Phone Number"),l.a.createElement("input",{type:"text",className:E,name:"parent_phone_number",value:d,onChange:this.onChange})),a,l.a.createElement("div",{className:"text-right"},e)))))))}}]),a}(n.Component)),C=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).state={id:"",firstname:"",lastname:"",gender:"",residential_area:"",parent_name:"",parent_phone_number:"",dateofbirth:"",address:"",classname:""},e.unsubscribe=null,e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=b.firestore().collection("students").doc(this.props.match.params.id);this.unsubscribe=a.onSnapshot(function(a){var t=a.data(),n=t.firstname,l=t.lastname,s=t.gender,r=t.residential_area,c=t.parent_name,m=t.parent_phone_number,i=t.dateofbirth,o=t.address,d=t.classname,u=a.id;e.setState({id:u,firstname:n,lastname:l,gender:s,residential_area:r,parent_name:c,parent_phone_number:m,dateofbirth:i,address:o,classname:d})})}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e={width:"50%",display:"inline-block"};return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(c.b,{to:"/students",className:"btn btn-default"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Students"),l.a.createElement("h3",{className:"text-center"},"Student Details"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"First Name:")),l.a.createElement("div",{style:e},this.state.firstname)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Last Name:")),l.a.createElement("div",{style:e},this.state.lastname))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Gender:")),l.a.createElement("div",{style:e},this.state.gender)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Residential Area:")),l.a.createElement("div",{style:e},this.state.residential_area))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Date of Birth:")),l.a.createElement("div",{style:e},this.state.dateofbirth)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Address:")),l.a.createElement("div",{style:e},this.state.address))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Parent's Name:")),l.a.createElement("div",{style:e},this.state.parent_name)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Parent's Phone Number:")),l.a.createElement("div",{style:e},this.state.parent_phone_number))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Class:")),l.a.createElement("div",{style:e},l.a.createElement("span",{className:"badge badge-info"},this.state.classname.name)))))),l.a.createElement("div",{className:"text-right"},l.a.createElement(c.b,{to:"/student/edit/".concat(this.state.id),className:"btn btn-primary"},l.a.createElement("i",{className:"fa fa-edit"})," Edit"))))}}]),a}(n.Component),S=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onChange=function(a){var t=e.state;t[a.target.name]=a.target.value,e.setState(t)},e.onSubmit=function(a){a.preventDefault(),e.setState({loading:!0});var t=e.state,n=t.firstname,l=t.lastname,s=t.gender,r=t.dateofbirth,c=t.address,m=t.residential_area,i=t.parent_name,o=t.parent_phone_number,d=t.student_class,u=b.firestore().collection("students").doc(e.state.key);b.firestore().collection("classes").doc(d).get().then(function(a){var t=a.data().name;u.update({firstname:n,lastname:l,gender:s,residential_area:m,parent_name:i,parent_phone_number:o,dateofbirth:r,address:c,classname:{id:a.id,name:t}}).then(function(a){e.setState({firstname:"",lastname:"",gender:"",residential_area:"",parent_name:"",parent_phone_number:"",dateofbirth:"",address:"",student_class:"",loading:!1},function(){e.props.history.push("/student/".concat(e.state.key))})}).catch(function(e){console.error("Error adding document: ",e)})})},e.fetchClasses=function(){var a=b.firestore().collection("classes"),t=[];e.unsubsribe=a.onSnapshot(function(a){a.forEach(function(e){var a=e.data().name;t.push({key:e.id,name:a})}),e.setState({classes:t}),e.unsubsribe()})},e.state={key:"",firstname:"",lastname:"",gender:"",residential_area:"",parent_name:"",parent_phone_number:"",dateofbirth:"",address:"",loading:!1,classes:[],student_class:""},e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.firestore().collection("students").doc(this.props.match.params.id).get().then(function(a){if(a.exists){var t=a.data();e.setState({key:a.id,firstname:t.firstname,lastname:t.lastname,gender:t.gender,residential_area:t.residential_area,parent_name:t.parent_name,parent_phone_number:t.parent_phone_number,dateofbirth:t.dateofbirth,address:t.address,student_class:t.classname.id})}else console.log("No such document!")}),this.fetchClasses()}},{key:"render",value:function(){var e,a=this.state,t=a.firstname,n=a.lastname,s=a.gender,r=a.residential_area,m=a.parent_name,i=a.parent_phone_number,o=a.dateofbirth,d=a.address,u=a.loading,h=a.student_class;return e=!0===u?l.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:"disabled"}," ",l.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Updating"):l.a.createElement("button",{type:"submit",className:"btn btn-success"},"Update Student"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"clearfix"},l.a.createElement(c.b,{to:"/students",className:"btn btn-primary"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Students"),l.a.createElement("h3",{className:"text-center"},"Update Student")),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("form",{className:"form",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"First Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",value:t,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",value:n,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Gender"),l.a.createElement("select",{className:"form-control",name:"gender",value:s,onChange:this.onChange},l.a.createElement("option",{value:"male"},"Male"),l.a.createElement("option",{value:"female"},"Female"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Date of Birth"),l.a.createElement("input",{type:"text",className:"form-control",name:"dateofbirth",value:o,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Address"),l.a.createElement("input",{type:"text",className:"form-control",name:"address",value:d,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Residential Area"),l.a.createElement("input",{type:"text",className:"form-control",name:"residential_area",value:r,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Parent's Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"parent_name",value:m,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Parent's Phone Number"),l.a.createElement("input",{type:"text",className:"form-control",name:"parent_phone_number",value:i,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Select a class"),l.a.createElement("select",{className:"form-control",name:"student_class",value:h,onChange:this.onChange},this.state.classes.map(function(e){return l.a.createElement("option",{key:e.key,value:e.key},e.name)}))),l.a.createElement("div",{className:"text-right"},e)))))))}}]),a}(n.Component),k=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onClassesUpdate=function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.name,l=a.capacity,s=a.teachers_num,r=a.students_num;t.push({key:e.id,name:n,capacity:l,students_num:r,teachers_num:s})}),e.setState({classes:t})},e.state={classes:[]},e.ref=b.firestore().collection("classes"),e.subscribe=null,e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.subscribe=this.ref.onSnapshot(this.onClassesUpdate)}},{key:"componentWillUnmount",value:function(){this.subscribe()}},{key:"render",value:function(){var e=1,a="";return a=this.state.classes.length>0?this.state.classes.map(function(a){return l.a.createElement("tr",{key:a.key},l.a.createElement("td",null,e++),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/class/".concat(a.key)},a.name)),l.a.createElement("td",null,a.students_num),l.a.createElement("td",null,a.teachers_num),l.a.createElement("td",null,a.capacity),l.a.createElement("td",null,a.students_num==a.capacity?l.a.createElement("label",{className:"badge badge-warning"},"Full"):l.a.createElement("label",{className:"badge badge-success"},"Available")))}):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"6",className:"text-center"},"No classes available")),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"clearfix mb-10"},l.a.createElement("div",{className:"pull-left"},l.a.createElement("h3",null,"Classes")),l.a.createElement("div",{className:"pull-right"},l.a.createElement(c.b,{to:"/classes/add",className:"btn btn-primary",style:{marginTop:20}},l.a.createElement("i",{className:"fa fa-plus"})," Add New Class"))),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("table",{className:"table table-striped no-margin"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Students"),l.a.createElement("th",null,"Teachers"),l.a.createElement("th",null,"Capacity"),l.a.createElement("th",null,"Status"))),l.a.createElement("tbody",null,a)))))))}}]),a}(n.Component),x=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onChange=function(a){var t=e.state;t[a.target.name]=a.target.value,e.setState(t)},e.onSubmit=function(a){a.preventDefault(),e.setState({loading:!0});var t=e.state,n=t.name,l=t.capacity;e.ref.add({name:n,capacity:parseInt(l),students_num:0,teachers_num:0}).then(function(a){e.setState({name:"",capacity:"",loading:!1},function(){e.props.history.push("/classes")})}).catch(function(e){console.error("Error adding document: ",e)})},e.ref=b.firestore().collection("classes"),e.state={name:"",capacity:"",loading:!1},e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e,a=this.state,t=a.name,n=a.capacity;return e=!0===a.loading?l.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:"disabled"}," ",l.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Adding"):l.a.createElement("button",{type:"submit",className:"btn btn-success"},"Add Class"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"clearfix"},l.a.createElement(c.b,{to:"/classes",className:"btn btn-default"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Classes"),l.a.createElement("h3",{className:"text-center"},"Add a New Class")),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("form",{className:"form",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"name",value:t,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Capacity"),l.a.createElement("input",{type:"text",className:"form-control",name:"capacity",value:n,onChange:this.onChange})),l.a.createElement("div",{className:"text-right"},e)))))))}}]),a}(n.Component),j=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).state={id:"",name:"",capacity:"",teachers_num:0,students_num:0,students:[],teachers:[]},e.unsubscribe=null,e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=b.firestore().collection("classes").doc(this.props.match.params.id),t=b.firestore().collection("classes").doc(this.props.match.params.id).collection("students"),n=b.firestore().collection("classes").doc(this.props.match.params.id).collection("teachers");this.unsubscribe=a.onSnapshot(function(a){var t=a.data(),n=t.name,l=t.capacity,s=t.students_num,r=t.teachers_num,c=a.id;e.setState({id:c,name:n,capacity:l,students_num:s,teachers_num:r})}),t.onSnapshot(function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.firstname,l=a.lastname,s=a.gender,r=a.residential_area,c=a.parent_name,m=a.parent_phone_number;t.push({key:e.id,firstname:n,lastname:l,gender:s,residential_area:r,parent_name:c,parent_phone_number:m})}),e.setState({students:t})}),n.onSnapshot(function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.firstname,l=a.lastname,s=a.gender,r=a.dateofbirth,c=a.address,m=a.residential_area,i=a.phone_number,o=a.id_number;t.push({key:e.id,firstname:n,lastname:l,gender:s,dateofbirth:r,address:c,residential_area:m,phone_number:i,id_number:o})}),e.setState({teachers:t})})}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e={width:"50%",display:"inline-block"},a=1,t=1,n="",s="";return n=this.state.students.length>0?this.state.students.map(function(e){return l.a.createElement("tr",{key:e.key},l.a.createElement("td",null,a++),l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.gender),l.a.createElement("td",null,e.parent_name),l.a.createElement("td",null,e.parent_phone_number),l.a.createElement("td",null,e.residential_area),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/student/".concat(e.key)},l.a.createElement("i",{className:"fa fa-eye"}))))}):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"8",className:"text-center"},"No students available")),s=this.state.teachers.length>0?this.state.teachers.map(function(e){return l.a.createElement("tr",{key:e.key},l.a.createElement("td",null,t++),l.a.createElement("td",null,e.firstname),l.a.createElement("td",null,e.lastname),l.a.createElement("td",null,e.phone_number),l.a.createElement("td",null,e.id_number),l.a.createElement("td",null,e.dateofbirth),l.a.createElement("td",null,e.residential_area),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/teacher/".concat(e.key)},l.a.createElement("i",{className:"fa fa-eye"}))))}):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"8",className:"text-center"},"No teachers available")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(c.b,{to:"/classes",className:"btn btn-default"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Classes"),l.a.createElement("h3",{className:"text-center"},"Class Details"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Name:")),l.a.createElement("div",{style:e},this.state.name)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Capacity:")),l.a.createElement("div",{style:e},this.state.capacity))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Students:")),l.a.createElement("div",{style:e},this.state.students_num)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Teachers:")),l.a.createElement("div",{style:e},this.state.teachers_num))))),l.a.createElement("div",{className:"text-right"},l.a.createElement(c.b,{to:"/class/edit/".concat(this.state.id),className:"btn btn-primary"},l.a.createElement("i",{className:"fa fa-edit"})," Edit")),l.a.createElement("h3",{className:"text-center"},"Students"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"First Name"),l.a.createElement("th",null,"Last Name"),l.a.createElement("th",null,"Sex"),l.a.createElement("th",null,"Parent Name"),l.a.createElement("th",null,"Parent Phone Number"),l.a.createElement("th",null,"Residence"),l.a.createElement("th",null))),l.a.createElement("tbody",null,n)))),l.a.createElement("h3",{className:"text-center"},"Teachers"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"First Name"),l.a.createElement("th",null,"Last Name"),l.a.createElement("th",null,"Phone"),l.a.createElement("th",null,"ID Number"),l.a.createElement("th",null,"Date of Birth"),l.a.createElement("th",null,"Residence"),l.a.createElement("th",null))),l.a.createElement("tbody",null,s))))))}}]),a}(n.Component),O=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onChange=function(a){var t=e.state;t[a.target.name]=a.target.value,e.setState(t)},e.onSubmit=function(a){a.preventDefault(),e.setState({loading:!0});var t=e.state,n=t.name,l=t.capacity;b.firestore().collection("classes").doc(e.state.key).update({name:n,capacity:l}).then(function(a){e.setState({name:"",capacity:"",loading:!1},function(){e.props.history.push("/class/".concat(e.state.key))})}).catch(function(e){console.error("Error adding document: ",e)})},e.state={key:"",name:"",capacity:"",loading:!1},e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.firestore().collection("classes").doc(this.props.match.params.id).get().then(function(a){if(a.exists){var t=a.data();e.setState({key:a.id,name:t.name,capacity:t.capacity})}else console.log("No such document!")})}},{key:"render",value:function(){var e,a=this.state,t=a.name,n=a.capacity;return e=!0===a.loading?l.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:"disabled"}," ",l.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Updating"):l.a.createElement("button",{type:"submit",className:"btn btn-success"},"Update Class"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"clearfix"},l.a.createElement(c.b,{to:"/classes",className:"btn btn-primary"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Classes"),l.a.createElement("h3",{className:"text-center"},"Update Class")),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("form",{className:"form",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"name",value:t,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Capacity"),l.a.createElement("input",{type:"text",className:"form-control",name:"capacity",value:n,onChange:this.onChange})),l.a.createElement("div",{className:"text-right"},e)))))))}}]),a}(n.Component),w=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onTeachersUpdate=function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.firstname,l=a.lastname,s=a.gender,r=a.dateofbirth,c=a.address,m=a.residential_area,i=a.phone_number,o=a.id_number;t.push({key:e.id,firstname:n,lastname:l,gender:s,dateofbirth:r,address:c,residential_area:m,phone_number:i,id_number:o})}),e.setState({teachers:t})},e.state={teachers:[]},e.unsubsribe=null,e.ref=b.firestore().collection("teachers"),e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.unsubsribe=this.ref.onSnapshot(this.onTeachersUpdate)}},{key:"componentWillUnmount",value:function(){this.unsubsribe()}},{key:"render",value:function(){var e=1,a="";return a=this.state.teachers.length>0?this.state.teachers.map(function(a){return l.a.createElement("tr",{key:a.key},l.a.createElement("td",null,e++),l.a.createElement("td",null,a.firstname),l.a.createElement("td",null,a.lastname),l.a.createElement("td",null,a.phone_number),l.a.createElement("td",null,a.id_number),l.a.createElement("td",null,a.dateofbirth),l.a.createElement("td",null,a.residential_area),l.a.createElement("td",null,l.a.createElement(c.b,{to:"/teacher/".concat(a.key)},l.a.createElement("i",{className:"fa fa-eye"}))))}):l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"8",className:"text-center"},"No teachers available")),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"clearfix mb-10"},l.a.createElement("div",{className:"pull-left"},l.a.createElement("h3",null,"Teachers")),l.a.createElement("div",{className:"pull-right"},l.a.createElement(c.b,{to:"/teachers/add",className:"btn btn-primary",style:{marginTop:20}},l.a.createElement("i",{className:"fa fa-plus"})," Add New Teacher"))),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"First Name"),l.a.createElement("th",null,"Last Name"),l.a.createElement("th",null,"Phone"),l.a.createElement("th",null,"ID Number"),l.a.createElement("th",null,"Date of Birth"),l.a.createElement("th",null,"Residence"),l.a.createElement("th",null))),l.a.createElement("tbody",null,a)))))))}}]),a}(n.Component),D=t(51),A=(t(93),function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onChange=function(a){var t=e.state,n="checkbox"===a.target.type?a.target.checked:a.target.value;t[a.target.name]=n,e.setState(t)},e.onSubmit=function(a){a.preventDefault(),e.setState({loading:!0});var t=e.state,n=t.firstname,l=t.lastname,s=t.gender,r=t.formatted_date,c=t.address,m=t.residential_area,i=t.phone_number,o=t.id_number,d=t.link_class,u=t.teacher_class;if(e.phone_number_re.test(i))if(e.idnumber_re.test(o)){var h={firstname:n,lastname:l,gender:s,dateofbirth:r,address:c,residential_area:m,phone_number:i,id_number:o};d?e.addTeacherWithClass(u,h).then(function(){e.setState({firstname:"",lastname:"",gender:"",phone_number:"",id_number:"",formatted_date:"",address:"",residential_area:"",loading:!1,link_class:!1,teacher_class:"",classes:[]},function(){e.props.history.push("/teachers")})}):e.addTeacherWithoutClass(h).then(function(){e.setState({firstname:"",lastname:"",gender:"",phone_number:"",id_number:"",formatted_date:"",address:"",residential_area:"",link_class:!1,loading:!1,classes:[]},function(){e.props.history.push("/teachers")})})}else e.setState({error:"id_number",loading:!1});else e.setState({error:"phone_number",loading:!1})},e.fetchClasses=function(){var a=b.firestore().collection("classes"),t=[];e.unsubsribe=a.onSnapshot(function(a){a.forEach(function(e){var a=e.data().name;t.push({key:e.id,name:a})}),e.setState({classes:t}),e.unsubsribe()})},e.addTeacherWithClass=function(a,t){return e.ref.add({firstname:t.firstname,lastname:t.lastname,gender:t.gender,dateofbirth:t.dateofbirth,address:t.address,residential_area:t.residential_area,phone_number:t.phone_number,id_number:t.id_number}).then(function(e){a.map(function(a){var n=b.firestore().collection("classes").doc(a.id);e.collection("classes").add({name:a.name,id:a.id}).then(function(){n.collection("teachers").add({firstname:t.firstname,lastname:t.lastname,gender:t.gender,dateofbirth:t.dateofbirth,address:t.address,residential_area:t.residential_area,phone_number:t.phone_number,id_number:t.id_number}).then(function(){return n.update({teachers_num:b.firestore.FieldValue.increment(1)})})})})})},e.addTeacherWithoutClass=function(a){return e.ref.add({firstname:a.firstname,lastname:a.lastname,gender:a.gender,dateofbirth:a.dateofbirth,address:a.address,residential_area:a.residential_area,phone_number:a.phone_number,id_number:a.id_number})},e.onValuesChange=function(a){var t=[];a.forEach(function(e){t.push({id:e.value,name:e.label})}),e.setState({teacher_class:t})},e.handleChange=function(a){var t=_()(a);e.setState({formatted_date:t.format("DD/MM/YYYY"),dateofbirth:a})},e.state={firstname:"",lastname:"",gender:"male",phone_number:"",id_number:"",dateofbirth:new Date,address:"",residential_area:"",loading:!1,link_class:!0,teacher_class:[],classes:[],error:"",formatted_date:""},e.ref=b.firestore().collection("teachers"),e.unsubsribe=null,e.phone_number_re=new RegExp("^[0]{1}[7]{1}[0-9]{8}$"),e.idnumber_re=new RegExp("^[0-9]{8}$"),e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentWillUnmount",value:function(){this.unsubsribe&&this.unsubsribe()}},{key:"render",value:function(){var e,a,t=this.state,n=t.firstname,s=t.lastname,r=t.gender,m=(t.dateofbirth,t.address),i=t.residential_area,o=t.phone_number,d=t.id_number,u=t.link_class,h=(t.teacher_class,"form-control"),E="form-control";if(e=!0===t.loading?l.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:"disabled"}," ",l.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Adding"):l.a.createElement("button",{type:"submit",className:"btn btn-success"},"Add Teacher"),!0===u){this.fetchClasses();var p=this.state.classes.map(function(e){return{label:e.name,value:e.key}});a=l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Select a class"),l.a.createElement(D.MultiSelect,{options:p,placeholder:"Select a class",onValuesChange:this.onValuesChange}))}return"phone_number"==this.state.error?h="form-control error":"id_number"==this.state.error&&(E="form-control error"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(c.b,{to:"/teachers",className:"btn btn-default"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Teachers"),l.a.createElement("h3",{className:"text-center"},"Add a Teacher"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("form",{className:"form",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"First Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",value:n,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",value:s,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Gender"),l.a.createElement("select",{className:"form-control",name:"gender",value:r,onChange:this.onChange},l.a.createElement("option",{value:"male"},"Male"),l.a.createElement("option",{value:"female"},"Female"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Date of Birth"),l.a.createElement(N.a,{selected:this.state.dateofbirth,onChange:this.handleChange,className:"form-control",placeholderText:"Select a date",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Phone Number"),l.a.createElement("input",{type:"text",className:h,name:"phone_number",value:o,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"ID Number"),l.a.createElement("input",{type:"text",className:E,name:"id_number",value:d,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Address"),l.a.createElement("input",{type:"text",className:"form-control",name:"address",value:m,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Residential Area"),l.a.createElement("input",{type:"text",className:"form-control",name:"residential_area",value:i,onChange:this.onChange})),a,l.a.createElement("div",{className:"text-right"},e)))))))}}]),a}(n.Component)),F=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).state={id:"",firstname:"",lastname:"",gender:"",phone_number:"",id_number:"",dateofbirth:"",address:"",residential_area:"",classes:[]},e.unsubscribe=null,e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=b.firestore().collection("teachers").doc(this.props.match.params.id);this.unsubscribe=a.onSnapshot(function(t){var n=t.data(),l=n.firstname,s=n.lastname,r=n.gender,c=n.dateofbirth,m=n.address,i=n.residential_area,o=n.phone_number,d=n.id_number,u=t.id;e.setState({id:u,firstname:l,lastname:s,gender:r,residential_area:i,dateofbirth:c,address:m,phone_number:o,id_number:d}),a.collection("classes").onSnapshot(function(a){var t=[];a.forEach(function(e){var a=e.data().name;t.push(a)}),e.setState({classes:t})})})}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e={width:"50%",display:"inline-block"};return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(c.b,{to:"/teachers",className:"btn btn-default"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Teachers"),l.a.createElement("h3",{className:"text-center"},"Teacher Details"),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"First Name:")),l.a.createElement("div",{style:e},this.state.firstname)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Last Name:")),l.a.createElement("div",{style:e},this.state.lastname))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Gender:")),l.a.createElement("div",{style:e},this.state.gender)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Residential Area:")),l.a.createElement("div",{style:e},this.state.residential_area))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Phone Number:")),l.a.createElement("div",{style:e},this.state.phone_number)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"ID Number:")),l.a.createElement("div",{style:e},this.state.id_number))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Date of Birth:")),l.a.createElement("div",{style:e},this.state.dateofbirth)),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{style:e},l.a.createElement("b",null,"Address:")),l.a.createElement("div",{style:e},this.state.address))),l.a.createElement("div",{className:"row",style:{padding:10}},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{style:{width:"20%",display:"inline-block"}},l.a.createElement("b",null,"Classes:")),l.a.createElement("div",{style:{width:"80%",display:"inline-block"}},this.state.classes.map(function(e){return l.a.createElement("span",{key:e,className:"badge badge-info"},e)})))))),l.a.createElement("div",{className:"text-right"},l.a.createElement(c.b,{to:"/teacher/edit/".concat(this.state.id),className:"btn btn-primary"},l.a.createElement("i",{className:"fa fa-edit"})," Edit"))))}}]),a}(n.Component),T=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(d.a)(this,Object(u.a)(a).call(this))).onChange=function(a){var t=e.state;t[a.target.name]=a.target.value,e.setState(t)},e.onSubmit=function(a){a.preventDefault(),e.setState({loading:!0});var t=e.state,n=t.firstname,l=t.lastname,s=t.gender,r=t.dateofbirth,c=t.address,m=t.residential_area,i=t.id_number,o=t.phone_number,d=t.teacher_classes,u=b.firestore().collection("teachers").doc(e.state.key);u.update({firstname:n,lastname:l,gender:s,residential_area:m,id_number:i,phone_number:o,dateofbirth:r,address:c}).then(function(a){u.collection("classes").get().then(function(e){e.forEach(function(e){console.log(e),e.ref.delete()})}).then(function(){d.map(function(e){u.collection("classes").add({name:e.name,id:e.id})})}),e.setState({firstname:"",lastname:"",gender:"",residential_area:"",id_number:"",phone_number:"",dateofbirth:"",address:"",loading:!1},function(){e.props.history.push("/teacher/".concat(e.state.key))})}).catch(function(e){console.error("Error adding document: ",e)})},e.fetchClasses=function(){var a=b.firestore().collection("classes"),t=[];e.unsubsribe=a.onSnapshot(function(a){a.forEach(function(e){var a=e.data().name;t.push({key:e.id,name:a})}),e.setState({classes:t}),e.unsubsribe()})},e.onValuesChange=function(a){var t=[];a.forEach(function(e){t.push({id:e.value,name:e.label})}),e.setState({teacher_classes:t}),console.log(t)},e.state={key:"",firstname:"",lastname:"",gender:"",phone_number:"",id_number:"",dateofbirth:"",address:"",residential_area:"",classes:[],teacher_classes:[],loading:!1},e}return Object(h.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=b.firestore().collection("teachers").doc(this.props.match.params.id);a.get().then(function(t){if(t.exists){var n=t.data();e.setState({key:t.id,firstname:n.firstname,lastname:n.lastname,gender:n.gender,residential_area:n.residential_area,id_number:n.id_number,phone_number:n.phone_number,dateofbirth:n.dateofbirth,address:n.address})}else console.log("No such document!");var l=a.collection("classes").onSnapshot(function(a){var t=[];a.forEach(function(e){var a=e.data(),n=a.id,l=a.name;t.push({id:n,name:l})}),e.setState({teacher_classes:t}),console.log("df",t),l()})}),this.fetchClasses()}},{key:"render",value:function(){var e,a=this.state,t=a.firstname,n=a.lastname,s=a.gender,r=a.residential_area,m=a.id_number,i=a.phone_number,o=a.dateofbirth,d=a.address;e=!0===a.loading?l.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:"disabled"}," ",l.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Updating"):l.a.createElement("button",{type:"submit",className:"btn btn-success"},"Update Teacher");var u=this.state.classes.map(function(e){return{label:e.name,value:e.key}}),h=this.state.teacher_classes.map(function(e){return{label:e.name,value:e.id}});return console.log("tags",h),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"clearfix"},l.a.createElement(c.b,{to:"/teachers",className:"btn btn-primary"},l.a.createElement("i",{className:"fa fa-chevron-left"})," All Teachers"),l.a.createElement("h3",{className:"text-center"},"Update Teacher")),l.a.createElement("div",{className:"panel panel-default"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("form",{className:"form",onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"First Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"firstname",value:t,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Last Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"lastname",value:n,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Gender"),l.a.createElement("select",{className:"form-control",name:"gender",value:s,onChange:this.onChange},l.a.createElement("option",{value:"male"},"Male"),l.a.createElement("option",{value:"female"},"Female"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Date of Birth"),l.a.createElement("input",{type:"text",className:"form-control",name:"dateofbirth",value:o,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"ID Number"),l.a.createElement("input",{type:"text",className:"form-control",name:"id_number",value:m,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Phone Number"),l.a.createElement("input",{type:"text",className:"form-control",name:"phone_number",value:i,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Address"),l.a.createElement("input",{type:"text",className:"form-control",name:"address",value:d,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Residential Area"),l.a.createElement("input",{type:"text",className:"form-control",name:"residential_area",value:r,onChange:this.onChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Select a class"),l.a.createElement(D.MultiSelect,{values:h,options:u,placeholder:"Select a class",onValuesChange:this.onValuesChange})),l.a.createElement("div",{className:"text-right"},e)))))))}}]),a}(n.Component);r.a.render(l.a.createElement(c.a,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(E,null),l.a.createElement("div",{className:"container main-content"},l.a.createElement(m.a,{exact:!0,path:"/",component:f}),l.a.createElement(m.a,{exact:!0,path:"/students",component:v}),l.a.createElement(m.a,{path:"/students/add",component:y}),l.a.createElement(m.a,{exact:!0,path:"/student/:id",component:C}),l.a.createElement(m.a,{path:"/student/edit/:id",component:S}),l.a.createElement(m.a,{exact:!0,path:"/teachers",component:w}),l.a.createElement(m.a,{path:"/teachers/add",component:A}),l.a.createElement(m.a,{exact:!0,path:"/teacher/:id",component:F}),l.a.createElement(m.a,{path:"/teacher/edit/:id",component:T}),l.a.createElement(m.a,{exact:!0,path:"/classes",component:k}),l.a.createElement(m.a,{path:"/classes/add",component:x}),l.a.createElement(m.a,{exact:!0,path:"/class/:id",component:j}),l.a.createElement(m.a,{path:"/class/edit/:id",component:O})))),document.getElementById("root"))},72:function(e,a,t){},99:function(e,a,t){e.exports=t(193)}},[[99,1,2]]]);
//# sourceMappingURL=main.2b50cf95.chunk.js.map